{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"site-section p-4\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"p-4 p-md-5 mb-4 text-white rounded bg-dark\"\n};\nconst _hoisted_4 = {\n  class: \"row\"\n};\nconst _hoisted_5 = {\n  class: \"col-6 px-0\"\n};\nconst _hoisted_6 = {\n  class: \"display-4 fst-italic\"\n};\nconst _hoisted_7 = {\n  class: \"lead my-3\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"lead mb-0\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"#\",\n  class: \"text-white fw-bold\"\n}, \"Continue reading...\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"col-6\"\n};\nconst _hoisted_10 = [\"src\"];\nconst _hoisted_11 = {\n  class: \"row mb-5 align-items-st\"\n};\nconst _hoisted_12 = {\n  class: \"col-md-5\"\n};\nconst _hoisted_13 = {\n  class: \"heading-20219\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"title text-cursive mb-4\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n  class: \"col-md-7\"\n};\nconst _hoisted_17 = {\n  class: \"cause shadow-sm\"\n};\nconst _hoisted_18 = {\n  class: \"cause-link d-block\"\n};\nconst _hoisted_19 = [\"src\"];\nconst _hoisted_20 = {\n  class: \"px-3 pt-3 border-top-0 border border shadow-sm\"\n};\nconst _hoisted_21 = {\n  class: \"mb-4\"\n};\nconst _hoisted_22 = {\n  class: \"border-top border-light border-bottom py-2 d-flex justify-content-between\"\n};\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"div\", null, \"Ticket price\", -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = {\n  class: \"ml-auto\"\n};\nconst _hoisted_25 = {\n  class: \"text-success\"\n};\nconst _hoisted_26 = {\n  class: \"py-4\"\n};\nconst _hoisted_27 = {\n  class: \"d-flex align-items-center\"\n};\nconst _hoisted_28 = {\n  class: \"\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h1\", _hoisted_6, _toDisplayString($data.currentCar.title), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($data.currentCar.description), 1\n  /* TEXT */\n  ), _hoisted_8]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"img\", {\n    src: $data.currentCar.image,\n    alt: \"Image\",\n    class: \"img-fluid\",\n    style: {\n      \"width\": \"100%\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_10)])])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _createElementVNode(\"p\", null, _toDisplayString($data.currentCar.description), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary rounded-0 px-4\",\n    onClick: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.buyTicketAction && $options.buyTicketAction(...args), [\"prevent\"])),\n    disabled: $data.currentCar.is_rented\n  }, \"Rent car \", 8\n  /* PROPS */\n  , _hoisted_15)])])]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"a\", _hoisted_18, [_createElementVNode(\"img\", {\n    src: $data.currentCar.image,\n    alt: \"Image\",\n    class: \"img-fluid\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_19)]), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"h3\", _hoisted_21, _toDisplayString($data.currentCar.title), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"strong\", _hoisted_25, _toDisplayString(_ctx.$filters.formatYoctoNearToNear($data.currentCar.price_per_hour)) + \" Ⓝ\", 1\n  /* TEXT */\n  )])]), _createElementVNode(\"div\", _hoisted_26, [_createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, _toDisplayString($data.currentCar.owner_id), 1\n  /* TEXT */\n  )])])])])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","href","_createElementBlock","_toDisplayString","$data","title","description","_hoisted_8","src","image","alt","style","_hoisted_14","onClick","$options","disabled","is_rented","_hoisted_15","_hoisted_23","_ctx","formatYoctoNearToNear","price_per_hour","owner_id"],"sourceRoot":"","sources":["/var/www/ch-8-car-renting/frontend/src/components/Pages/SingleCarComponent.vue"],"sourcesContent":["<template>\n  <div class=\"site-section p-4\">\n    <div class=\"container\">\n      <div class=\"p-4 p-md-5 mb-4 text-white rounded bg-dark\">\n        <div class=\"row\">\n          <div class=\"col-6 px-0\">\n            <h1 class=\"display-4 fst-italic\">{{ currentCar.title }}</h1>\n            <p class=\"lead my-3\">{{ currentCar.description }}</p>\n            <p class=\"lead mb-0\"><a href=\"#\" class=\"text-white fw-bold\">Continue reading...</a></p>\n          </div>\n          <div class=\"col-6\">\n            <img :src=\"currentCar.image\" alt=\"Image\" class=\"img-fluid\" style=\"width: 100%\">\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row mb-5 align-items-st\">\n        <div class=\"col-md-5\">\n          <div class=\"heading-20219\">\n            <h2 class=\"title text-cursive mb-4\"></h2>\n            <p>{{ currentCar.description }}</p>\n            <p>\n              <button class=\"btn btn-primary rounded-0 px-4\" @click.prevent=\"buyTicketAction\"\n                      :disabled=\"currentCar.is_rented\">Rent car\n              </button>\n            </p>\n          </div>\n        </div>\n        <div class=\"col-md-7\">\n          <div class=\"cause shadow-sm\">\n\n            <a class=\"cause-link d-block\">\n              <img :src=\"currentCar.image\" alt=\"Image\" class=\"img-fluid\">\n            </a>\n\n            <div class=\"px-3 pt-3 border-top-0 border border shadow-sm\">\n              <h3 class=\"mb-4\">{{ currentCar.title }}</h3>\n              <div class=\"border-top border-light border-bottom py-2 d-flex justify-content-between\">\n                <div>Ticket price</div>\n                <div class=\"ml-auto\"><strong\n                    class=\"text-success\">{{ $filters.formatYoctoNearToNear(currentCar.price_per_hour) }} Ⓝ</strong>\n                </div>\n              </div>\n\n              <div class=\"py-4\">\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"\">{{ currentCar.owner_id }}</div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n\n<script>\nimport Big from \"big.js\";\nimport * as nearAPI from \"near-api-js\";\n\nconst BOATLOAD_OF_GAS = Big(3).times(10 ** 13).toFixed();\n\nexport default {\n  name: \"SingleCarComponent\",\n  components: {},\n  data() {\n    return {\n      currentCar: {},\n    }\n  },\n  methods: {\n    async getCurrentCar() {\n      const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n      const argsBase64 = window.btoa(JSON.stringify({id: +this.$route.params.id}))\n      const rawResult = await provider.query({\n        request_type: \"call_function\",\n        finality: \"final\",\n        account_id: window.nearConfig.contractName,\n        method_name: \"get_car_by_id\",\n        args_base64: argsBase64,\n      }).catch(() => {\n        this.$router.push({'name': 'home'});\n      });\n      this.currentCar = JSON.parse(Buffer.from(rawResult.result).toString())\n    },\n\n    async buyTicket() {\n      await window.walletSelector.signAndSendTransaction({\n        signerId: window.nearAccount.accountId,\n        // receiverId: nearConfig.contractName,\n        actions: [\n          {\n            type: \"FunctionCall\",\n            params: {\n              methodName: \"buy_ticket\",\n              args: {\n                \"meeting_id\": +this.$route.params.id,\n              },\n              gas: BOATLOAD_OF_GAS,\n              deposit: Big((this.currentMeeting.ticket_price / (10 ** 24)).toFixed(5)).times(10 ** 24).toFixed()\n            },\n          },\n        ]\n      });\n    },\n\n    async buyTicketAction() {\n      let loader = this.$loading.show();\n      try {\n        await this.buyTicket();\n        this.$swal.fire({\n          icon: 'success',\n          title: 'Success',\n          text: 'Ticket was successfully bought!',\n          footer: `To look at your ticket go to your wallet collectibles!`,\n        })\n        await this.getCurrentMeeting();\n      } catch (error) {\n        this.$swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: error.message,\n          footer: ``,\n        })\n        console.log(error)\n      }\n      loader.hide();\n\n    }\n  },\n  async mounted() {\n    let loader = this.$loading.show();\n    await this.getCurrentCar();\n    loader.hide();\n    //\n    // let uri = window.location.search.substring(1);\n    // let params = new URLSearchParams(uri);\n    // const transactionHash = params.get('transactionHashes');\n    // if(transactionHash){\n    //   this.$swal.fire({\n    //     icon: 'success',\n    //     title: 'Success',\n    //     text: 'Ticket was successfully bought!',\n    //     footer: `To look at your ticket go to your wallet collectibles!`,\n    //   })\n    // }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}