{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"site-section p-4\"\n};\nconst _hoisted_2 = {\n  class: \"container\"\n};\nconst _hoisted_3 = {\n  class: \"p-4 p-md-5 mb-4 text-white rounded bg-dark\"\n};\nconst _hoisted_4 = {\n  class: \"row\"\n};\nconst _hoisted_5 = {\n  class: \"col-6 px-0\"\n};\nconst _hoisted_6 = {\n  class: \"display-4 fst-italic\"\n};\nconst _hoisted_7 = {\n  class: \"lead my-3\"\n};\nconst _hoisted_8 = {\n  class: \"d-flex justify-content-between\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Owner:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = {\n  class: \"d-flex justify-content-between\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"span\", null, \"Price per hour:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_12 = {\n  class: \"col-6\"\n};\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  class: \"row mb-5 align-items-st\"\n};\nconst _hoisted_15 = {\n  class: \"col-md-5\"\n};\nconst _hoisted_16 = {\n  class: \"heading-20219\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"title text-cursive mb-4\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = {\n  class: \"col-md-7\"\n};\nconst _hoisted_20 = {\n  class: \"cause shadow-sm\"\n};\nconst _hoisted_21 = {\n  class: \"cause-link d-block\"\n};\nconst _hoisted_22 = [\"src\"];\nconst _hoisted_23 = {\n  class: \"px-3 pt-3 border-top-0 border border shadow-sm\"\n};\nconst _hoisted_24 = {\n  class: \"mb-4\"\n};\nconst _hoisted_25 = {\n  class: \"border-top border-light border-bottom py-2 d-flex justify-content-between\"\n};\n\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"div\", null, \"Ticket price\", -1\n/* HOISTED */\n);\n\nconst _hoisted_27 = {\n  class: \"ml-auto\"\n};\nconst _hoisted_28 = {\n  class: \"text-success\"\n};\nconst _hoisted_29 = {\n  class: \"py-4\"\n};\nconst _hoisted_30 = {\n  class: \"d-flex align-items-center\"\n};\nconst _hoisted_31 = {\n  class: \"\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h1\", _hoisted_6, _toDisplayString($data.currentCar.title), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($data.currentCar.description), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", null, [_createElementVNode(\"p\", _hoisted_8, [_hoisted_9, _createElementVNode(\"span\", null, _toDisplayString($data.currentCar.owner_id), 1\n  /* TEXT */\n  )]), _createElementVNode(\"p\", _hoisted_10, [_hoisted_11, _createElementVNode(\"span\", null, _toDisplayString(_ctx.$filters.formatYoctoNearToNear($data.currentCar.price_per_hour)) + \" Ⓝ\", 1\n  /* TEXT */\n  )])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"img\", {\n    src: $data.currentCar.image,\n    alt: \"Image\",\n    class: \"img-fluid\",\n    style: {\n      \"width\": \"100%\"\n    }\n  }, null, 8\n  /* PROPS */\n  , _hoisted_13)])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"p\", null, _toDisplayString($data.currentCar.description), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", null, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary rounded-0 px-4\",\n    onClick: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.buyTicketAction && $options.buyTicketAction(...args), [\"prevent\"])),\n    disabled: $data.currentCar.is_rented\n  }, \"Rent car \", 8\n  /* PROPS */\n  , _hoisted_18)])])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"a\", _hoisted_21, [_createElementVNode(\"img\", {\n    src: $data.currentCar.image,\n    alt: \"Image\",\n    class: \"img-fluid\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_22)]), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"h3\", _hoisted_24, _toDisplayString($data.currentCar.title), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_25, [_hoisted_26, _createElementVNode(\"div\", _hoisted_27, [_createElementVNode(\"strong\", _hoisted_28, _toDisplayString(_ctx.$filters.formatYoctoNearToNear($data.currentCar.price_per_hour)) + \" Ⓝ\", 1\n  /* TEXT */\n  )])]), _createElementVNode(\"div\", _hoisted_29, [_createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, _toDisplayString($data.currentCar.owner_id), 1\n  /* TEXT */\n  )])])])])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_toDisplayString","$data","title","description","_hoisted_9","owner_id","_hoisted_11","_ctx","formatYoctoNearToNear","price_per_hour","src","image","alt","style","_hoisted_17","onClick","$options","disabled","is_rented","_hoisted_18","_hoisted_26"],"sourceRoot":"","sources":["/var/www/ch-8-car-renting/frontend/src/components/Pages/SingleCarComponent.vue"],"sourcesContent":["<template>\n  <div class=\"site-section p-4\">\n    <div class=\"container\">\n      <div class=\"p-4 p-md-5 mb-4 text-white rounded bg-dark\">\n        <div class=\"row\">\n          <div class=\"col-6 px-0\">\n            <h1 class=\"display-4 fst-italic\">{{ currentCar.title }}</h1>\n            <p class=\"lead my-3\">{{ currentCar.description }}</p>\n            <div>\n              <p class=\"d-flex justify-content-between\"><span>Owner:</span><span>{{currentCar.owner_id}}</span></p>\n              <p class=\"d-flex justify-content-between\"><span>Price per hour:</span><span>{{$filters.formatYoctoNearToNear(currentCar.price_per_hour)}} Ⓝ</span></p>\n            </div>\n          </div>\n          <div class=\"col-6\">\n            <img :src=\"currentCar.image\" alt=\"Image\" class=\"img-fluid\" style=\"width: 100%\">\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row mb-5 align-items-st\">\n        <div class=\"col-md-5\">\n          <div class=\"heading-20219\">\n            <h2 class=\"title text-cursive mb-4\"></h2>\n            <p>{{ currentCar.description }}</p>\n            <p>\n              <button class=\"btn btn-primary rounded-0 px-4\" @click.prevent=\"buyTicketAction\"\n                      :disabled=\"currentCar.is_rented\">Rent car\n              </button>\n            </p>\n          </div>\n        </div>\n        <div class=\"col-md-7\">\n          <div class=\"cause shadow-sm\">\n\n            <a class=\"cause-link d-block\">\n              <img :src=\"currentCar.image\" alt=\"Image\" class=\"img-fluid\">\n            </a>\n\n            <div class=\"px-3 pt-3 border-top-0 border border shadow-sm\">\n              <h3 class=\"mb-4\">{{ currentCar.title }}</h3>\n              <div class=\"border-top border-light border-bottom py-2 d-flex justify-content-between\">\n                <div>Ticket price</div>\n                <div class=\"ml-auto\"><strong\n                    class=\"text-success\">{{ $filters.formatYoctoNearToNear(currentCar.price_per_hour) }} Ⓝ</strong>\n                </div>\n              </div>\n\n              <div class=\"py-4\">\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"\">{{ currentCar.owner_id }}</div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n\n<script>\nimport Big from \"big.js\";\nimport * as nearAPI from \"near-api-js\";\n\nconst BOATLOAD_OF_GAS = Big(3).times(10 ** 13).toFixed();\n\nexport default {\n  name: \"SingleCarComponent\",\n  components: {},\n  data() {\n    return {\n      currentCar: {},\n    }\n  },\n  methods: {\n    async getCurrentCar() {\n      const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n      const argsBase64 = window.btoa(JSON.stringify({id: +this.$route.params.id}))\n      const rawResult = await provider.query({\n        request_type: \"call_function\",\n        finality: \"final\",\n        account_id: window.nearConfig.contractName,\n        method_name: \"get_car_by_id\",\n        args_base64: argsBase64,\n      }).catch(() => {\n        this.$router.push({'name': 'home'});\n      });\n      this.currentCar = JSON.parse(Buffer.from(rawResult.result).toString())\n    },\n\n    async buyTicket() {\n      await window.walletSelector.signAndSendTransaction({\n        signerId: window.nearAccount.accountId,\n        // receiverId: nearConfig.contractName,\n        actions: [\n          {\n            type: \"FunctionCall\",\n            params: {\n              methodName: \"buy_ticket\",\n              args: {\n                \"meeting_id\": +this.$route.params.id,\n              },\n              gas: BOATLOAD_OF_GAS,\n              deposit: Big((this.currentMeeting.ticket_price / (10 ** 24)).toFixed(5)).times(10 ** 24).toFixed()\n            },\n          },\n        ]\n      });\n    },\n\n    async buyTicketAction() {\n      let loader = this.$loading.show();\n      try {\n        await this.buyTicket();\n        this.$swal.fire({\n          icon: 'success',\n          title: 'Success',\n          text: 'Ticket was successfully bought!',\n          footer: `To look at your ticket go to your wallet collectibles!`,\n        })\n        await this.getCurrentMeeting();\n      } catch (error) {\n        this.$swal.fire({\n          icon: 'error',\n          title: 'Error',\n          text: error.message,\n          footer: ``,\n        })\n        console.log(error)\n      }\n      loader.hide();\n\n    }\n  },\n  async mounted() {\n    let loader = this.$loading.show();\n    await this.getCurrentCar();\n    loader.hide();\n    //\n    // let uri = window.location.search.substring(1);\n    // let params = new URLSearchParams(uri);\n    // const transactionHash = params.get('transactionHashes');\n    // if(transactionHash){\n    //   this.$swal.fire({\n    //     icon: 'success',\n    //     title: 'Success',\n    //     text: 'Ticket was successfully bought!',\n    //     footer: `To look at your ticket go to your wallet collectibles!`,\n    //   })\n    // }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}