{"ast":null,"code":"import getConfig from './config.js';\nimport { Contract } from \"near-api-js\";\nimport * as nearAPI from \"near-api-js\";\nwindow.roketCfg = getConfig('roketo_wrap');\n\nasync function init() {\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n  const near = await nearAPI.connect({\n    keyStore,\n    ...window.roketCfg\n  });\n  window.roketoConnection = new nearAPI.WalletConnection(near);\n  const account = await near.account(window.nearAccount.accountId);\n\n  if (!window.roketoConnection.isSignedIn()) {\n    window.roketoConnection.requestSignIn(window.roketCfg.contractName // '', // title. Optional, by the way\n    // '', // successUrl. Optional, by the way\n    // '', // failureUrl. Optional, by the way\n    );\n  }\n\n  console.log(account);\n  const ftContract = new Contract(account, 'wrap.testnet', {\n    changeMethods: ['ft_transfer_call', 'near_deposit']\n  });\n  console.log(ftContract);\n  await ftContract.near_deposit({}, \"200000000000000\", \"10000000000000000000000\"); // await ftContract.ft_transfer_call({\n  //     receiver_id: 'streaming-r-v2.dcversus.testnet',\n  //     amount: '1000000000000000000000000', // 1 NEAR\n  //     memo: 'Roketo transfer',\n  //     msg: JSON.stringify({\n  //         Create: {\n  //             request: {\n  //                 \"owner_id\": window.nearAccount.accountId,\n  //                 \"receiver_id\": \"rocketotest2.testnet\",\n  //                 \"tokens_per_sec\": 385802469135802469, // 1 month for 1 NEAR\n  //             }\n  //         }\n  //     }),\n  // }, 200000000000000);\n}\n\nexport { init };","map":{"version":3,"names":["getConfig","Contract","nearAPI","window","roketCfg","init","keyStore","keyStores","BrowserLocalStorageKeyStore","near","connect","roketoConnection","WalletConnection","account","nearAccount","accountId","isSignedIn","requestSignIn","contractName","console","log","ftContract","changeMethods","near_deposit"],"sources":["/var/www/ch-8-car-renting/frontend/src/roketoNearJsService.js"],"sourcesContent":["import getConfig from './config.js';\nimport {Contract} from \"near-api-js\";\nimport * as nearAPI from \"near-api-js\";\n\nwindow.roketCfg = getConfig('roketo_wrap');\n\nasync function init() {\n\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect({keyStore, ...window.roketCfg});\n\n    window.roketoConnection = new nearAPI.WalletConnection(near);\n\n    const account = await near.account(window.nearAccount.accountId);\n\n    if (!window.roketoConnection.isSignedIn()){\n        window.roketoConnection.requestSignIn(\n            window.roketCfg.contractName,\n            // '', // title. Optional, by the way\n            // '', // successUrl. Optional, by the way\n            // '', // failureUrl. Optional, by the way\n        );    \n    }\n    console.log(account)\n    const ftContract = new Contract(account, 'wrap.testnet', {\n        changeMethods: ['ft_transfer_call', 'near_deposit'],\n    });\n    console.log(ftContract)\n    await ftContract.near_deposit({}, \"200000000000000\", \"10000000000000000000000\");\n    // await ftContract.ft_transfer_call({\n    //     receiver_id: 'streaming-r-v2.dcversus.testnet',\n    //     amount: '1000000000000000000000000', // 1 NEAR\n    //     memo: 'Roketo transfer',\n    //     msg: JSON.stringify({\n    //         Create: {\n    //             request: {\n    //                 \"owner_id\": window.nearAccount.accountId,\n    //                 \"receiver_id\": \"rocketotest2.testnet\",\n    //                 \"tokens_per_sec\": 385802469135802469, // 1 month for 1 NEAR\n    //             }\n    //         }\n    //     }),\n    // }, 200000000000000);\n\n}\n\nexport {init}"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,SAAQC,QAAR,QAAuB,aAAvB;AACA,OAAO,KAAKC,OAAZ,MAAyB,aAAzB;AAEAC,MAAM,CAACC,QAAP,GAAkBJ,SAAS,CAAC,aAAD,CAA3B;;AAEA,eAAeK,IAAf,GAAsB;EAElB,MAAMC,QAAQ,GAAG,IAAIJ,OAAO,CAACK,SAAR,CAAkBC,2BAAtB,EAAjB;EACA,MAAMC,IAAI,GAAG,MAAMP,OAAO,CAACQ,OAAR,CAAgB;IAACJ,QAAD;IAAW,GAAGH,MAAM,CAACC;EAArB,CAAhB,CAAnB;EAEAD,MAAM,CAACQ,gBAAP,GAA0B,IAAIT,OAAO,CAACU,gBAAZ,CAA6BH,IAA7B,CAA1B;EAEA,MAAMI,OAAO,GAAG,MAAMJ,IAAI,CAACI,OAAL,CAAaV,MAAM,CAACW,WAAP,CAAmBC,SAAhC,CAAtB;;EAEA,IAAI,CAACZ,MAAM,CAACQ,gBAAP,CAAwBK,UAAxB,EAAL,EAA0C;IACtCb,MAAM,CAACQ,gBAAP,CAAwBM,aAAxB,CACId,MAAM,CAACC,QAAP,CAAgBc,YADpB,CAEI;IACA;IACA;IAJJ;EAMH;;EACDC,OAAO,CAACC,GAAR,CAAYP,OAAZ;EACA,MAAMQ,UAAU,GAAG,IAAIpB,QAAJ,CAAaY,OAAb,EAAsB,cAAtB,EAAsC;IACrDS,aAAa,EAAE,CAAC,kBAAD,EAAqB,cAArB;EADsC,CAAtC,CAAnB;EAGAH,OAAO,CAACC,GAAR,CAAYC,UAAZ;EACA,MAAMA,UAAU,CAACE,YAAX,CAAwB,EAAxB,EAA4B,iBAA5B,EAA+C,yBAA/C,CAAN,CAtBkB,CAuBlB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AAEH;;AAED,SAAQlB,IAAR"},"metadata":{},"sourceType":"module"}