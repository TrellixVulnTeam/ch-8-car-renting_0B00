{"ast":null,"code":"import getConfig from './config.js';\nimport * as nearAPI from 'near-api-js';\nimport { providers } from \"near-api-js\";\nconst nearConfig = getConfig(process.env.VUE_APP_NEAR_ENV || 'testnet');\n\nasync function init() {\n  // create a keyStore for signing transactions using the user's key\n  // which is located in the browser local storage after user logs in\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore(); // Initializing connection to the NEAR testnet\n\n  const near = await nearAPI.connect({\n    keyStore,\n    ...nearConfig\n  }); // Initialize wallet connection\n\n  window.walletConnection = new nearAPI.WalletConnection(near);\n  await updateNearAcc();\n}\n\nasync function updateNearAcc() {\n  window.nearAccount = {\n    'isSignedIn': await isSignedIn(),\n    'accountId': window.walletConnection.getAccountId()\n  };\n}\n\nasync function signIn() {\n  window.walletConnection.requestSignIn(nearConfig.contractName // '', // title. Optional, by the way\n  // '', // successUrl. Optional, by the way\n  // '', // failureUrl. Optional, by the way\n  );\n}\n\nasync function signOut() {\n  await window.walletConnection.signOut();\n  await updateNearAcc();\n}\n\nasync function isSignedIn() {\n  return window.walletSelector.isSignedIn();\n}\n\nexport { init, signIn, signOut, isSignedIn };","map":{"version":3,"names":["getConfig","nearAPI","providers","nearConfig","process","env","VUE_APP_NEAR_ENV","init","keyStore","keyStores","BrowserLocalStorageKeyStore","near","connect","window","walletConnection","WalletConnection","updateNearAcc","nearAccount","isSignedIn","getAccountId","signIn","requestSignIn","contractName","signOut","walletSelector"],"sources":["/var/www/ch-8-car-renting/frontend/src/utils.js"],"sourcesContent":["import getConfig from './config.js';\nimport * as nearAPI from 'near-api-js';\nimport {providers} from \"near-api-js\";\n\nconst nearConfig = getConfig(process.env.VUE_APP_NEAR_ENV || 'testnet');\n\nasync function init() {\n\n    // create a keyStore for signing transactions using the user's key\n// which is located in the browser local storage after user logs in\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n\n// Initializing connection to the NEAR testnet\n    const near = await nearAPI.connect({keyStore, ...nearConfig});\n\n// Initialize wallet connection\n    window.walletConnection = new nearAPI.WalletConnection(near);\n\n    await updateNearAcc();\n\n}\n\nasync function updateNearAcc() {\n    window.nearAccount = {\n        'isSignedIn': await isSignedIn(),\n        'accountId': window.walletConnection.getAccountId()\n    }\n}\n\nasync function signIn() {\n    window.walletConnection.requestSignIn(\n        nearConfig.contractName,\n        // '', // title. Optional, by the way\n        // '', // successUrl. Optional, by the way\n        // '', // failureUrl. Optional, by the way\n    );\n}\n\nasync function signOut() {\n    await window.walletConnection.signOut();\n    await updateNearAcc();\n}\n\nasync function isSignedIn() {\n    return window.walletSelector.isSignedIn();\n}\n\n\n\nexport {\n    init,\n    signIn,\n    signOut,\n    isSignedIn,\n}"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,aAAzB;AACA,SAAQC,SAAR,QAAwB,aAAxB;AAEA,MAAMC,UAAU,GAAGH,SAAS,CAACI,OAAO,CAACC,GAAR,CAAYC,gBAAZ,IAAgC,SAAjC,CAA5B;;AAEA,eAAeC,IAAf,GAAsB;EAElB;EACJ;EACI,MAAMC,QAAQ,GAAG,IAAIP,OAAO,CAACQ,SAAR,CAAkBC,2BAAtB,EAAjB,CAJkB,CAMtB;;EACI,MAAMC,IAAI,GAAG,MAAMV,OAAO,CAACW,OAAR,CAAgB;IAACJ,QAAD;IAAW,GAAGL;EAAd,CAAhB,CAAnB,CAPkB,CAStB;;EACIU,MAAM,CAACC,gBAAP,GAA0B,IAAIb,OAAO,CAACc,gBAAZ,CAA6BJ,IAA7B,CAA1B;EAEA,MAAMK,aAAa,EAAnB;AAEH;;AAED,eAAeA,aAAf,GAA+B;EAC3BH,MAAM,CAACI,WAAP,GAAqB;IACjB,cAAc,MAAMC,UAAU,EADb;IAEjB,aAAaL,MAAM,CAACC,gBAAP,CAAwBK,YAAxB;EAFI,CAArB;AAIH;;AAED,eAAeC,MAAf,GAAwB;EACpBP,MAAM,CAACC,gBAAP,CAAwBO,aAAxB,CACIlB,UAAU,CAACmB,YADf,CAEI;EACA;EACA;EAJJ;AAMH;;AAED,eAAeC,OAAf,GAAyB;EACrB,MAAMV,MAAM,CAACC,gBAAP,CAAwBS,OAAxB,EAAN;EACA,MAAMP,aAAa,EAAnB;AACH;;AAED,eAAeE,UAAf,GAA4B;EACxB,OAAOL,MAAM,CAACW,cAAP,CAAsBN,UAAtB,EAAP;AACH;;AAID,SACIX,IADJ,EAEIa,MAFJ,EAGIG,OAHJ,EAIIL,UAJJ"},"metadata":{},"sourceType":"module"}