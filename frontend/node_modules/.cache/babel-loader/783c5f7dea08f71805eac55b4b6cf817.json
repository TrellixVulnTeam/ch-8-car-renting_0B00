{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport { Contract, providers } from \"near-api-js\"; // import * as nearAPI from \"near-api-js\";\n//network config (replace testnet with mainnet or betanet)\n\nconst provider = new providers.JsonRpcProvider(\"https://archival-rpc.testnet.near.org\");\n\nasync function getState(txHash, accountId) {\n  return await provider.txStatus(txHash, accountId);\n}\n\nasync function createStream() {\n  console.log(ftContract); // \"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n\n  const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n  const argsBase64 = window.btoa(JSON.stringify({\n    stream_id: \"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n  }));\n  const rawResult = await provider.query({\n    request_type: \"call_function\",\n    finality: \"final\",\n    account_id: 'streaming-r-v2.dcversus.testnet',\n    method_name: \"get_stream\",\n    args_base64: argsBase64\n  });\n  console.log(JSON.parse(Buffer.from(rawResult.result).toString()));\n  const TX_HASH = \"E5hDHujqqmfvTPsscTVzCpH6LA9YsPgXfPfC8Q4pXCYz\";\n  let result = await getState(TX_HASH, window.nearAccount.accountId);\n\n  if (\"SuccessValue\" in result.status) {\n    if (result.transaction.actions[0].FunctionCall.method_name === 'near_deposit') {}\n  }\n\n  console.log(\"Result: \", result);\n  console.log(\"Result: \");\n  console.log(\"Result: \");\n  const ftContract = new Contract(window.walletConnection.account(), 'wrap.testnet', {\n    changeMethods: ['ft_transfer_call', 'near_deposit']\n  });\n  console.log(ftContract); // await ftContract.near_deposit({}, \"200000000000000\", \"1000000000000000000000000\");\n  // await ftContract.ft_transfer_call({\n  //     receiver_id: 'streaming-r-v2.dcversus.testnet',\n  //     amount: '1000000000000000000000000', // 1 NEAR\n  //     memo: 'Roketo transfer',\n  //     msg: JSON.stringify({\n  //         Create: {\n  //             request: {\n  //                 \"owner_id\": window.nearAccount.accountId,\n  //                 \"receiver_id\": \"rocketotest2.testnet\",\n  //                 \"tokens_per_sec\": 385802469135802469, // 1 month for 1 NEAR\n  //             }\n  //         }\n  //     }),\n  // }, 200000000000000,1);\n} // async function init() {\n//\n//     console.log(ftContract)\n//     // \"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n//     const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n//\n//     const argsBase64 = window.btoa(JSON.stringify({\n//         stream_id:\"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n//     }))\n//     const rawResult = await provider.query({\n//         request_type: \"call_function\",\n//         finality: \"final\",\n//         account_id: 'streaming-r-v2.dcversus.testnet',\n//         method_name: \"get_stream\",\n//         args_base64: argsBase64,\n//     });\n//     console.log(JSON.parse(Buffer.from(rawResult.result).toString()))\n//\n//\n//\n//\n//\n//\n//\n//\n//     // const argsBase64 = window.btoa(JSON.stringify({\n//     //     account_id:window.nearAccount.accountId,\n//     //     from:1,\n//     //     limit:10\n//     // }))\n//     // const rawResult = await provider.query({\n//     //     request_type: \"call_function\",\n//     //     finality: \"final\",\n//     //     account_id: 'streaming-r-v2.dcversus.testnet',\n//     //     method_name: \"get_account_outgoing_streams\",\n//     //     args_base64: argsBase64,\n//     // });\n//     // console.log(JSON.parse(Buffer.from(rawResult.result).toString()))\n//\n// }\n\n\nexport { createStream };","map":{"version":3,"names":["Contract","providers","provider","JsonRpcProvider","getState","txHash","accountId","txStatus","createStream","console","log","ftContract","nearAPI","window","nearConfig","nodeUrl","argsBase64","btoa","JSON","stringify","stream_id","rawResult","query","request_type","finality","account_id","method_name","args_base64","parse","Buffer","from","result","toString","TX_HASH","nearAccount","status","transaction","actions","FunctionCall","walletConnection","account","changeMethods"],"sources":["/var/www/ch-8-car-renting/frontend/src/roketoNearJsService.js"],"sourcesContent":["import {Contract, providers} from \"near-api-js\";\n// import * as nearAPI from \"near-api-js\";\n//network config (replace testnet with mainnet or betanet)\nconst provider = new providers.JsonRpcProvider(\n    \"https://archival-rpc.testnet.near.org\"\n);\nasync function getState(txHash, accountId) {\n    return await provider.txStatus(txHash, accountId);\n}\n\nasync function createStream(){\n\n    console.log(ftContract)\n    // \"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n    const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n\n    const argsBase64 = window.btoa(JSON.stringify({\n        stream_id:\"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n    }))\n    const rawResult = await provider.query({\n        request_type: \"call_function\",\n        finality: \"final\",\n        account_id: 'streaming-r-v2.dcversus.testnet',\n        method_name: \"get_stream\",\n        args_base64: argsBase64,\n    });\n    console.log(JSON.parse(Buffer.from(rawResult.result).toString()))\n    const TX_HASH = \"E5hDHujqqmfvTPsscTVzCpH6LA9YsPgXfPfC8Q4pXCYz\";\n\n    let result = await getState(TX_HASH, window.nearAccount.accountId);\n    if (\"SuccessValue\" in result.status){\n        if (result.transaction.actions[0].FunctionCall.method_name === 'near_deposit'){\n\n        }\n    }\n    console.log(\"Result: \", result);\n    console.log(\"Result: \", );\n    console.log(\"Result: \", );\n    const ftContract = new Contract(window.walletConnection.account(), 'wrap.testnet', {\n        changeMethods: ['ft_transfer_call', 'near_deposit'],\n    });\n    console.log(ftContract)\n    // await ftContract.near_deposit({}, \"200000000000000\", \"1000000000000000000000000\");\n    // await ftContract.ft_transfer_call({\n    //     receiver_id: 'streaming-r-v2.dcversus.testnet',\n    //     amount: '1000000000000000000000000', // 1 NEAR\n    //     memo: 'Roketo transfer',\n    //     msg: JSON.stringify({\n    //         Create: {\n    //             request: {\n    //                 \"owner_id\": window.nearAccount.accountId,\n    //                 \"receiver_id\": \"rocketotest2.testnet\",\n    //                 \"tokens_per_sec\": 385802469135802469, // 1 month for 1 NEAR\n    //             }\n    //         }\n    //     }),\n    // }, 200000000000000,1);\n\n}\n// async function init() {\n//\n//     console.log(ftContract)\n//     // \"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n//     const provider = new nearAPI.providers.JsonRpcProvider(window.nearConfig.nodeUrl);\n//\n//     const argsBase64 = window.btoa(JSON.stringify({\n//         stream_id:\"J3Wit8ifeNJjEYNr7AEymkkVbo3k5fJVmshKSkd4aHRY\"\n//     }))\n//     const rawResult = await provider.query({\n//         request_type: \"call_function\",\n//         finality: \"final\",\n//         account_id: 'streaming-r-v2.dcversus.testnet',\n//         method_name: \"get_stream\",\n//         args_base64: argsBase64,\n//     });\n//     console.log(JSON.parse(Buffer.from(rawResult.result).toString()))\n//\n//\n//\n//\n//\n//\n//\n//\n//     // const argsBase64 = window.btoa(JSON.stringify({\n//     //     account_id:window.nearAccount.accountId,\n//     //     from:1,\n//     //     limit:10\n//     // }))\n//     // const rawResult = await provider.query({\n//     //     request_type: \"call_function\",\n//     //     finality: \"final\",\n//     //     account_id: 'streaming-r-v2.dcversus.testnet',\n//     //     method_name: \"get_account_outgoing_streams\",\n//     //     args_base64: argsBase64,\n//     // });\n//     // console.log(JSON.parse(Buffer.from(rawResult.result).toString()))\n//\n// }\n\nexport {createStream}"],"mappings":";AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,aAAlC,C,CACA;AACA;;AACA,MAAMC,QAAQ,GAAG,IAAID,SAAS,CAACE,eAAd,CACb,uCADa,CAAjB;;AAGA,eAAeC,QAAf,CAAwBC,MAAxB,EAAgCC,SAAhC,EAA2C;EACvC,OAAO,MAAMJ,QAAQ,CAACK,QAAT,CAAkBF,MAAlB,EAA0BC,SAA1B,CAAb;AACH;;AAED,eAAeE,YAAf,GAA6B;EAEzBC,OAAO,CAACC,GAAR,CAAYC,UAAZ,EAFyB,CAGzB;;EACA,MAAMT,QAAQ,GAAG,IAAIU,OAAO,CAACX,SAAR,CAAkBE,eAAtB,CAAsCU,MAAM,CAACC,UAAP,CAAkBC,OAAxD,CAAjB;EAEA,MAAMC,UAAU,GAAGH,MAAM,CAACI,IAAP,CAAYC,IAAI,CAACC,SAAL,CAAe;IAC1CC,SAAS,EAAC;EADgC,CAAf,CAAZ,CAAnB;EAGA,MAAMC,SAAS,GAAG,MAAMnB,QAAQ,CAACoB,KAAT,CAAe;IACnCC,YAAY,EAAE,eADqB;IAEnCC,QAAQ,EAAE,OAFyB;IAGnCC,UAAU,EAAE,iCAHuB;IAInCC,WAAW,EAAE,YAJsB;IAKnCC,WAAW,EAAEX;EALsB,CAAf,CAAxB;EAOAP,OAAO,CAACC,GAAR,CAAYQ,IAAI,CAACU,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYT,SAAS,CAACU,MAAtB,EAA8BC,QAA9B,EAAX,CAAZ;EACA,MAAMC,OAAO,GAAG,8CAAhB;EAEA,IAAIF,MAAM,GAAG,MAAM3B,QAAQ,CAAC6B,OAAD,EAAUpB,MAAM,CAACqB,WAAP,CAAmB5B,SAA7B,CAA3B;;EACA,IAAI,kBAAkByB,MAAM,CAACI,MAA7B,EAAoC;IAChC,IAAIJ,MAAM,CAACK,WAAP,CAAmBC,OAAnB,CAA2B,CAA3B,EAA8BC,YAA9B,CAA2CZ,WAA3C,KAA2D,cAA/D,EAA8E,CAE7E;EACJ;;EACDjB,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBqB,MAAxB;EACAtB,OAAO,CAACC,GAAR,CAAY,UAAZ;EACAD,OAAO,CAACC,GAAR,CAAY,UAAZ;EACA,MAAMC,UAAU,GAAG,IAAIX,QAAJ,CAAaa,MAAM,CAAC0B,gBAAP,CAAwBC,OAAxB,EAAb,EAAgD,cAAhD,EAAgE;IAC/EC,aAAa,EAAE,CAAC,kBAAD,EAAqB,cAArB;EADgE,CAAhE,CAAnB;EAGAhC,OAAO,CAACC,GAAR,CAAYC,UAAZ,EA/ByB,CAgCzB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AAEH,C,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAQH,YAAR"},"metadata":{},"sourceType":"module"}