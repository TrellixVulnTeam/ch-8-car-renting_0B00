{"ast":null,"code":"import getConfig from './config.js';\nimport * as nearAPI from 'near-api-js';\nwindow.nearConfig = getConfig(process.env.VUE_APP_NEAR_ENV || 'testnet');\n\nasync function init() {\n  // create a keyStore for signing transactions using the user's key\n  // which is located in the browser local storage after user logs in\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore(); // Initializing connection to the NEAR testnet\n\n  const near = await nearAPI.connect({\n    keyStore,\n    ...window.nearConfig\n  }); // Initialize wallet connection\n\n  window.walletConnection = new nearAPI.WalletConnection(near);\n  await updateNearAcc();\n}\n\nasync function updateNearAcc() {\n  window.nearAccount = {\n    'isSignedIn': await isSignedIn(),\n    'accountId': window.walletConnection.getAccountId()\n  };\n}\n\nasync function signIn() {\n  window.walletConnection.requestSignIn(window.nearConfig.contractName // '', // title. Optional, by the way\n  // '', // successUrl. Optional, by the way\n  // '', // failureUrl. Optional, by the way\n  );\n}\n\nasync function signOut() {\n  await window.walletConnection.signOut();\n  await updateNearAcc();\n}\n\nasync function isSignedIn() {\n  return window.walletConnection.isSignedIn();\n}\n\nexport { init, signIn, signOut, isSignedIn };","map":{"version":3,"names":["getConfig","nearAPI","window","nearConfig","process","env","VUE_APP_NEAR_ENV","init","keyStore","keyStores","BrowserLocalStorageKeyStore","near","connect","walletConnection","WalletConnection","updateNearAcc","nearAccount","isSignedIn","getAccountId","signIn","requestSignIn","contractName","signOut"],"sources":["/var/www/ch-8-car-renting/frontend/src/utils.js"],"sourcesContent":["import getConfig from './config.js';\nimport * as nearAPI from 'near-api-js';\n\nwindow.nearConfig = getConfig(process.env.VUE_APP_NEAR_ENV || 'testnet');\n\nasync function init() {\n\n    // create a keyStore for signing transactions using the user's key\n// which is located in the browser local storage after user logs in\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n\n// Initializing connection to the NEAR testnet\n    const near = await nearAPI.connect({keyStore, ...window.nearConfig});\n\n// Initialize wallet connection\n    window.walletConnection = new nearAPI.WalletConnection(near);\n\n    await updateNearAcc();\n\n}\n\nasync function updateNearAcc() {\n    window.nearAccount = {\n        'isSignedIn': await isSignedIn(),\n        'accountId': window.walletConnection.getAccountId()\n    }\n}\n\nasync function signIn() {\n    window.walletConnection.requestSignIn(\n        window.nearConfig.contractName,\n        // '', // title. Optional, by the way\n        // '', // successUrl. Optional, by the way\n        // '', // failureUrl. Optional, by the way\n    );\n}\n\nasync function signOut() {\n    await window.walletConnection.signOut();\n    await updateNearAcc();\n}\n\nasync function isSignedIn() {\n    return window.walletConnection.isSignedIn();\n}\n\n\n\nexport {\n    init,\n    signIn,\n    signOut,\n    isSignedIn,\n}"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,aAAtB;AACA,OAAO,KAAKC,OAAZ,MAAyB,aAAzB;AAEAC,MAAM,CAACC,UAAP,GAAoBH,SAAS,CAACI,OAAO,CAACC,GAAR,CAAYC,gBAAZ,IAAgC,SAAjC,CAA7B;;AAEA,eAAeC,IAAf,GAAsB;EAElB;EACJ;EACI,MAAMC,QAAQ,GAAG,IAAIP,OAAO,CAACQ,SAAR,CAAkBC,2BAAtB,EAAjB,CAJkB,CAMtB;;EACI,MAAMC,IAAI,GAAG,MAAMV,OAAO,CAACW,OAAR,CAAgB;IAACJ,QAAD;IAAW,GAAGN,MAAM,CAACC;EAArB,CAAhB,CAAnB,CAPkB,CAStB;;EACID,MAAM,CAACW,gBAAP,GAA0B,IAAIZ,OAAO,CAACa,gBAAZ,CAA6BH,IAA7B,CAA1B;EAEA,MAAMI,aAAa,EAAnB;AAEH;;AAED,eAAeA,aAAf,GAA+B;EAC3Bb,MAAM,CAACc,WAAP,GAAqB;IACjB,cAAc,MAAMC,UAAU,EADb;IAEjB,aAAaf,MAAM,CAACW,gBAAP,CAAwBK,YAAxB;EAFI,CAArB;AAIH;;AAED,eAAeC,MAAf,GAAwB;EACpBjB,MAAM,CAACW,gBAAP,CAAwBO,aAAxB,CACIlB,MAAM,CAACC,UAAP,CAAkBkB,YADtB,CAEI;EACA;EACA;EAJJ;AAMH;;AAED,eAAeC,OAAf,GAAyB;EACrB,MAAMpB,MAAM,CAACW,gBAAP,CAAwBS,OAAxB,EAAN;EACA,MAAMP,aAAa,EAAnB;AACH;;AAED,eAAeE,UAAf,GAA4B;EACxB,OAAOf,MAAM,CAACW,gBAAP,CAAwBI,UAAxB,EAAP;AACH;;AAID,SACIV,IADJ,EAEIY,MAFJ,EAGIG,OAHJ,EAIIL,UAJJ"},"metadata":{},"sourceType":"module"}